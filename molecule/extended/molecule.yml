---
dependency:
  name: galaxy
  options:
    requirements-file: molecule/extended/requirements.yml

scenario:
  test_sequence:
    - dependency
    - destroy
    - converge
    - verify
    - destroy

  # If converge fails, Molecule may try to run a scenario cleanup action.
  # We don't need a dedicated cleanup playbook for this localhost-only scenario.
  cleanup_sequence: []

  destroy_sequence:
    - dependency
    - destroy

driver:
  name: default

platforms:
  []

provisioner:
  name: ansible
  env:
    ANSIBLE_CONFIG: ${MOLECULE_SCENARIO_DIRECTORY}/ansible.cfg
    ANSIBLE_ROLES_PATH: ${MOLECULE_PROJECT_DIRECTORY}/..:~/.ansible/roles:/etc/ansible/roles:/usr/share/ansible/roles
  inventory:
    host_vars:
      localhost:
        ansible_connection: local
  playbooks:
    converge: converge.yml
    destroy: destroy.yml
    verify: verify.yml

verifier:
  name: ansible
